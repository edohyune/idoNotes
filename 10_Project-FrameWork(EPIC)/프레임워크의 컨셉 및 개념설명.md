# 프레임워크 구성
프레임워크는 **FormMain**과 **BusinessForm**으로 구성된다.
- **FormMain**: BusinessForm을 MDI 자식으로 실행한다. FormMain은 한번 개발되면 크게 변경되지 않는다.
- **BusinessForm**: 업무용 프로그램으로, 주로 추가 개발되거나 변경된다.

이러한 BusinessForm을 개발하는 도구를 **Designer**라고 한다. Designer에서는 WorkSet을 정의하고, 바인딩 정보 및 Fld의 메타 정보를 통해 BusinessForm의 작동을 제어한다.
# 워크셋 개념 및 설명

## 워크셋 개념
워크셋이란 Form에서 데이터 작업을 하는 3가지 단위이다.
- **GridSet**: Grid 유형의 작업 단위
- **FieldSet**: UI Control의 묶어 하나의 문서를 표현하는 작업 단위
- **DataSet**: 등록된 SQL을 실행한 결과를 C# 프로그램에서 처리하는 작업 단위

## 워크셋 구성 요소
워크셋을 구성하기 위해서는 기본적으로 SQL이 필요하다. 
- **Column Properties** 또는 **Field Properties**: 컬럼과 컨트롤러가 데이터와 바인딩되는 데이터의 실제 개체(그리드의 컬럼 또는 UI Controller)의 목록이다. 해당 목록은 쿼리에서 가져온다. 
- 워크셋의 중심에는 SQL 쿼리가 있다. Select 쿼리의 결과는 워크셋을 구성하는 컬럼 정보 또는 컨트롤러와 바인딩된다. 
- 프레임워크에서 워크셋의 작동 환경을 구성한다. 

참고: 다른 컨트롤러 또는 다른 워크셋의 컬럼을 **Fld**라고 한다. 

## 워크셋 작동 방식

### WorkSet Get (Pull)
워크셋의 작동은 쿼리의 실행을 위해 Fld에서 데이터를 가져와서 쿼리를 실행시킨다. Epic Prologue에서는 이것을 `WrkGet`이라고 부른다. 

### WorkSet Set (Push)
워크셋은 데이터를 Fld에 값을 Push하여 밀어넣기도 한다. Epic Prologue에서는 이것을 `WrkSet`이라고 부른다. 

### WorkSet Ref (Save See)
워크셋은 데이터를 저장할 때 참조 키에 해당하는 값들은 저장 시 다른 Fld에서 가져와서 저장한다. 


워크셋 오픈
데이터 변경에 따른 이벤트 처리가 필요한 이유는 데이터가 변경되면 오픈순서에 의해 이후의 데이터를 다시 오픈해야하기 때문이다. 

주로 그리드셋에서는 FocusedRow가 변경되면, 필드셋에서는 특정 컨트롤러들의 값이 변경되면 자신이후의 워크셋을 오픈순서에 따라 다시 오픈한다. 


# 프레임워크 구조와 워크셋 로드 로직

BusinessForm은 다양한 형태의 워크셋을 가지며, 이를 기반으로 데이터를 로드하고 프로그램을 구성합니다. 이러한 워크셋은 FrmBase에서 구현되고, FrmBase는 이를 BusinessForm에 상속하여 사용됩니다. 워크셋의 로드 및 저장 순서와 관련된 최적화된 접근 방식을 아래와 같이 제안합니다.

# FrmBase 클래스

FrmBase는 모든 워크셋의 로드 및 저장을 처리하는 로직을 가지고 있습니다. 이를 통해 BusinessForm은 다양한 형태의 워크셋을 효과적으로 관리할 수 있습니다.

- **워크셋 초기화**:
    - `ResetWorkSet` 메서드에서 `wrkSetsOrderby` 리스트를 한 번 로드하고, `UCFieldSet`과 `UCGridNav` 인스턴스를 초기화합니다.
    - `ControlHelper.FindControlRecursive` 메서드를 사용하여 재귀적으로 컨트롤을 찾습니다.
- **Open 및 Save 메서드**:
    - `Open` 메서드는 `wrkSetsOrderby` 리스트를 열기 순서에 따라 정렬한 후, `UCFieldSet`과 `UCGridNav` 인스턴스를 열도록 합니다.
    - `Save` 메서드는 `wrkSetsOrderby` 리스트를 저장 순서에 따라 정렬한 후, `UCFieldSet`과 `UCGridNav` 인스턴스를 저장하도록 합니다.
- **데이터 변경 이벤트 처리**:
    - `FieldSet_DataChanged` 이벤트 핸들러는 데이터가 변경될 때마다 해당 워크셋을 다시 여는 로직을 포함합니다.

